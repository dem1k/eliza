<html>
<head>
    <style type="text/css">
        body {
            background-image: url('bg.jpg');
            color: #f5f5f5;
            font-size: 20px;

        }

        h1 {
            margin: 20;
            padding: 0;
            text-align: center
        }

        #chok, #game, #player, #inputs {
            text-align: center;
            margin-left: 30%;
            margin-right: 30%
        }

        td {
            background-color: #a52a2a;
            border-style: double;
            border-color: white;
            padding: 1px;
            width: 20px;
        }

    </style>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
    <title>
        Javascript
    </title>

</head>
<body>
<h1>Игра - Плитка шоколада.</h1>

<div id="player"></div>
<div id='chok'>
    <h2>Выберите вариант игры</h2>

    <div id='game'>
        <button onclick="select_type(1)">Игра 1(2 x N)</button>
        <button onclick="select_type(2)">Игра 2(N x N)</button>

    </div>
</div>
<div id="inputs">

</div>
<script type="text/javascript">
    var player = 1;
    var n = 0;
    var m = 2;
    function select_type(type) {
        n = prompt('Введите N');
        switch (type) {
            case 1:
                m = 2;
                break;
            case 2:
                m = n;
                break;
            default:
                alert('Ошибка');
                return false;
        }
        if (m === null || n === null) {
            return false;
        }
        if (m < 2 || n < 2) {
            alert('Неправильный размер плитки');
            return false;
        }
        chokolate(m, n);
    }
    function chokolate(m, n) {
        chok_arr = new Array();
        chok_view = '<table >';
        for (var i = 1; i <= m; i++) {
            chok_arr[i] = new Array();
            chok_view += '<tr>';
            for (var j = 1; j <= n; j++) {
                chok_arr[i][j] = 0;
                chok_view += '<td id="cell' + i + '_' + j + '">&nbsp;</td>';
            }

            chok_view += '</tr>';
        }
        chok_view += '</table>';
        document.getElementById('chok').innerHTML = chok_view;
        document.getElementById('player').innerHTML = 'Ход игрока: ' + player;
        document.getElementById('inputs').innerHTML =
                '<label for="x">Введите Х(верт.)</label>' +
                        '<input type="text" id="val_x"><br/>' +
                        '<label for="y">Введите Y(гор.)</label>' +
                        '<input type="text" id="val_y"><br/>' +
                        '<button onclick="eat()">Cьесть</button>';


    }
    function eat() {
        var x = document.getElementById('val_x').value;
        var y = document.getElementById('val_y').value;
        if (x && x <= m && y && y <= n) {

            if (cell = document.getElementById('cell' + x + '_' + y)) {
                if (cell.innerHTML != '&nbsp;') {
                    alert('Ета ячейка уже сьедена.');
                    return false
                }
                chok_arr[x][y] = player;
                cell.innerText = player;

                if (cell = document.getElementById('cell' + x + '_' + (y - 1))) {
                    chok_arr[x][(y - 1)] = player;
                    if (cell.innerHTML == '&nbsp;')  cell.innerText = player;

                }
                if (cell = document.getElementById('cell' + (x - 1) + '_' + y)) {
                    chok_arr[(x - 1)][y] = player;
                    if (cell.innerHTML == '&nbsp;')  cell.innerText = player;

                }
            }
            else {
                alert('Неправильный ход');
                return false;
            }


            var line = 0;
            for (i = 1; i <= m; i++) {
                if (chok_arr[i].indexOf(0) < 0) line += 1;
            }
            if (line == m) {
                alert('Проиграл игрок: ' + player)
                location.reload();
            }
            if (player == 1) {
                player = 2;
            } else {
                player = 1;
            }
            document.getElementById('player').innerHTML = 'Ход игрока: ' + player;
        }
        else {
            alert('Введите правильные координаты координаты');
            return false
        }
    }
</script>
</body>
</html>